(this["webpackJsonp@truffle/dashboard"]=this["webpackJsonp@truffle/dashboard"]||[]).push([[0],{179:function(e,t,n){"use strict";(function(e){var r=n(0),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,c){function a(e){try{o(r.next(e))}catch(t){c(t)}}function i(e){try{o(r.throw(e))}catch(t){c(t)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}o((r=r.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageBusPorts=t.connectToMessageBus=t.connectToMessageBusWithRetries=t.sendAndAwait=t.broadcastAndAwaitFirst=t.broadcastAndDisregard=t.createMessage=t.startWebSocketServer=t.base64ToJson=t.jsonToBase64=void 0;var a=c(n(168)),i=c(n(284)),o=c(n(178)),u=c(n(355));i.default.shim();t.jsonToBase64=function(t){var n=JSON.stringify(t);return e.from(n).toString("base64")};t.base64ToJson=function(t){var n=e.from(t,"base64").toString("utf8");return JSON.parse(n)};t.startWebSocketServer=function(e){return new Promise((function(t){var n=new a.default.Server(e,(function(){return t(n)}))}))};t.createMessage=function(e,t){return{id:Math.random(),type:e,payload:t}};t.broadcastAndDisregard=function(e,n){var r=t.jsonToBase64(n);e.forEach((function(e){e.send(r)}))};t.broadcastAndAwaitFirst=function(e,n){return s(void 0,void 0,void 0,r.mark((function s(){var c,a;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=e.map((function(e){return t.sendAndAwait(e,n)})),r.next=3,Promise.any(c);case 3:return a=r.sent,r.abrupt("return",a);case 5:case"end":return r.stop()}}),s)})))};t.sendAndAwait=function(e,n){return new Promise((function(r,s){e.addEventListener("message",(function(e){"string"!==typeof e.data&&(e.data=e.data.toString());var s=t.base64ToJson(e.data);s.id===n.id&&r(s)})),e.addEventListener("error",(function(e){s(e.error)})),e.addEventListener("close",(function(e){s(new Error("Socket connection closed with code '".concat(e.code,"' and reason '").concat(e.reason,"'")))}));var c=t.jsonToBase64(n);e.send(c)}))};t.connectToMessageBusWithRetries=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"localhost",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;return s(void 0,void 0,void 0,r.mark((function s(){var a,i;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=new Error,i=0;case 2:if(!(i<c)){r.next=17;break}return r.prev=3,r.next=6,t.connectToMessageBus(e,n);case 6:return r.abrupt("return",r.sent);case 9:return r.prev=9,r.t0=r.catch(3),a=r.t0,r.next=14,o.default(1e3);case 14:i+=1,r.next=2;break;case 17:throw a;case 18:case"end":return r.stop()}}),s,null,[[3,9]])})))};t.connectToMessageBus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"localhost",n=new a.default("ws://".concat(t,":").concat(e));return new Promise((function(e,t){n.addEventListener("open",(function(){return e(n)})),n.addEventListener("error",(function(e){return t(e.error)}))}))};t.getMessageBusPorts=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"localhost",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return s(void 0,void 0,void 0,r.mark((function s(){var c,a,i;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=0;case 1:if(!(c<n)){r.next=17;break}return r.prev=2,r.next=5,u.default.get("http://".concat(t,":").concat(e,"/ports"));case 5:return a=r.sent,i=a.data,r.abrupt("return",i);case 10:return r.prev=10,r.t0=r.catch(2),r.next=14,o.default(1e3);case 14:c+=1,r.next=1;break;case 17:throw new Error("Could not connect to dashboard at http://".concat(t,":").concat(e,"/ports"));case 18:case"end":return r.stop()}}),s,null,[[2,10]])})))}}).call(this,n(120).Buffer)},268:function(e,t,n){"use strict";var r=n(0),s=n(269).default,c=n(270).default,a=n(271).default,i=n(273).default,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,c){function a(e){try{o(r.next(e))}catch(t){c(t)}}function i(e){try{o(r.throw(e))}catch(t){c(t)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}o((r=r.apply(e,t||[])).next())}))},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardMessageBus=void 0;var d=u(n(178)),l=n(107),f=n(179),h=n(169),b=function(e){a(n,e);var t=i(n);function n(e,r){var c,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"localhost";return s(this,n),(c=t.call(this)).publishPort=e,c.subscribePort=r,c.host=a,c.publishers=[],c.subscribers=[],c.unfulfilledRequests=new Map([]),c}return c(n,[{key:"start",value:function(){return o(this,void 0,void 0,r.mark((function e(){var t=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.startWebSocketServer({host:this.host,port:this.subscribePort});case 2:return this.subscribeServer=e.sent,this.subscribeServer.on("connection",(function(e){e.on("close",(function(){t.removeSubscriber(e)})),e.once("message",(function(){return t.addSubscriber(e)}))})),e.next=6,f.startWebSocketServer({host:this.host,port:this.publishPort});case 6:this.publishServer=e.sent,this.publishServer.on("connection",(function(e){e.on("close",(function(){t.removePublisher(e)})),t.addPublisher(e)}));case 8:case"end":return e.stop()}}),e,this)})))}},{key:"ready",value:function(){return o(this,void 0,void 0,r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.subscribers.length){e.next=5;break}return e.next=3,d.default(1e3);case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)})))}},{key:"terminate",value:function(){return o(this,void 0,void 0,r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.promisify(this.publishServer.close.bind(this.publishServer))();case 2:return e.next=4,h.promisify(this.subscribeServer.close.bind(this.subscribeServer))();case 4:this.emit("terminate");case 5:case"end":return e.stop()}}),e,this)})))}},{key:"processRequest",value:function(e,t,n){return o(this,void 0,void 0,r.mark((function s(){var c,a,i;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return"string"!==typeof t&&(t=t.toString()),r.next=3,this.ready();case 3:return this.unfulfilledRequests.set(t,{publisher:e,data:t}),c=f.base64ToJson(t),r.prev=5,this.logToPublishers("Sending message to ".concat(n.length," subscribers"),"requests"),this.logToPublishers(c,"requests"),r.next=10,f.broadcastAndAwaitFirst(n,c);case 10:a=r.sent,this.logToPublishers("Sending response for message ".concat(c.id),"responses"),this.logToPublishers(a,"responses"),i=f.jsonToBase64(a),e.send(i),this.unfulfilledRequests.delete(t),this.invalidateMessage(c.id),r.next=23;break;case 19:r.prev=19,r.t0=r.catch(5),this.logToPublishers("An error occurred while processing message ".concat(c.id),"errors"),this.logToPublishers(r.t0,"errors");case 23:case"end":return r.stop()}}),s,this,[[5,19]])})))}},{key:"invalidateMessage",value:function(e){var t=f.createMessage("invalidate",e);f.broadcastAndDisregard(this.subscribers,t)}},{key:"logToPublishers",value:function(e,t){this.logTo(e,this.publishers,t)}},{key:"logToSubscribers",value:function(e,t){this.logTo(e,this.subscribers,t)}},{key:"logToAll",value:function(e,t){this.logToPublishers(e,t),this.logToSubscribers(e,t)}},{key:"logTo",value:function(e,t,n){var r={namespace:"dashboard-message-bus",message:e};n&&(r.namespace+=":".concat(n));var s=f.createMessage("log",r);f.broadcastAndDisregard(t,s)}},{key:"addSubscriber",value:function(e){var t=this;this.unfulfilledRequests.forEach((function(n){var r=n.publisher,s=n.data;return t.processRequest(r,s,[e])})),this.logToPublishers("Subscriber connected","connections"),this.subscribers.push(e)}},{key:"removeSubscriber",value:function(e){this.logToPublishers("Subscriber disconnected","connections"),this.subscribers=this.subscribers.filter((function(t){return t!==e})),this.terminateIfNoConnections()}},{key:"addPublisher",value:function(e){var t=this;this.logToPublishers("Publisher connected","connections"),e.on("message",(function(n){t.processRequest(e,n,t.subscribers)})),this.publishers.push(e)}},{key:"removePublisher",value:function(e){this.logToPublishers("Publisher disconnected","connections"),this.publishers=this.publishers.filter((function(t){return t!==e})),this.clearRequestsForPublisher(e),this.terminateIfNoConnections()}},{key:"terminateIfNoConnections",value:function(){0===this.publishers.length&&0===this.subscribers.length&&this.terminate()}},{key:"clearRequestsForPublisher",value:function(e){var t=this;this.unfulfilledRequests.forEach((function(n,r){n.publisher===e&&t.unfulfilledRequests.delete(r)}))}}]),n}(l.EventEmitter);t.DashboardMessageBus=b},309:function(e,t){},375:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(376),t)},376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInvalidateMessage=t.isLogMessage=t.isDashboardProviderMessage=void 0;t.isDashboardProviderMessage=function(e){return"provider"===e.type};t.isLogMessage=function(e){return"log"===e.type};t.isInvalidateMessage=function(e){return"invalidate"===e.type}},395:function(e,t){},406:function(e,t){},410:function(e,t){},447:function(e,t,n){},448:function(e,t,n){"use strict";n.r(t);var r=n(14),s=n.n(r),c=n(245),a=n.n(c),i=n(28),o=n(11),u=n(246),d=n(16),l=n(0),f=n.n(l),h=n(168),b=n.n(h),v=n(75),p=n(247),j=n.n(p),x=n(169),O=["eth_signTransaction","eth_sendTransaction","eth_decrypt","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign"],g=["eth_sign"],m=function(){var e=Object(o.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.hostname,n=Number(window.location.port),e.abrupt("return",Object(v.getMessageBusPorts)(n,t));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(e){return O.includes(e.payload.method)},w=function(e){return g.includes(e.payload.method)},_=function(){var e=Object(o.a)(f.a.mark((function e(t,n,r){var s,c,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("forwardDashboardProviderRequest:input",{id:r.id,provider:t,connector:n,payload:r}),s=Object(x.promisify)(t.sendAsync.bind(t)),e.prev=2,e.next=5,s(r);case 5:if(c=e.sent,a=null===n||void 0===n?void 0:n.id,console.debug("forwardDashboardProviderRequest:result",{id:r.id,payload:r,result:c}),"injected"!==a){e.next=12;break}return e.abrupt("return",c);case 12:return e.abrupt("return",{jsonrpc:r.jsonrpc,id:r.id,result:c});case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",{jsonrpc:r.jsonrpc,id:r.id,error:e.t0});case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,n,r){return e.apply(this,arguments)}}(),k=function(){var e=Object(o.a)(f.a.mark((function e(t,n,r,s){var c,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(n,r,t.payload);case 2:c=e.sent,a={id:t.id,payload:c},P(a,s);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,s){return e.apply(this,arguments)}}(),P=function(e,t){console.debug("Sending response",e);var n=Object(v.jsonToBase64)(e);t.send(n)},S=function(){var e=Object(o.a)(f.a.mark((function e(t){var n,r,s,c,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("https://chainid.network/chains.json");case 2:if(n=e.sent,r=n.data,s=r.filter((function(e){return e.chainId===t})),c=Object(d.a)(s,1),a=c[0]){e.next=7;break}return e.abrupt("return","Chain ID ".concat(t));case 7:return e.abrupt("return",a.name);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(o.a)(f.a.mark((function e(t,n){var r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,n);case 2:return r=e.sent,s=E(n),e.abrupt("return",null!==r&&void 0!==r?r:s);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(o.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.lookupAddress(n);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",void 0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(e){return"".concat(e.substr(0,6),"...").concat(e.substr(e.length-4,4))},M=n(12);var D=function(e){var t=e.chainId,n=Object(r.useState)("Chain ID ".concat(t)),s=Object(d.a)(n,2),c=s[0],a=s[1],i=1===t?"text-truffle-red":"";return Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:n=e.sent,a(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t&&e(t)}),[t]),Object(M.jsx)("div",{className:"rounded uppercase ".concat(i),children:c})},R=n(45);var A=function(e){var t=e.onClick,n=e.text;return Object(M.jsx)("button",{className:"rounded p-4 mx-2 bg-truffle-blue text-truffle-brown uppercase hover:bg-white",onClick:t,children:n})};var C=function(e){var t,n,s=e.disconnect,c=Object(r.useState)(),a=Object(d.a)(c,2),i=a[0],u=a[1],l=Object(R.b)(),h=Object(d.a)(l,1)[0].data,b=Object(R.d)(),v=Object(d.a)(b,1)[0].data,p=Object(R.c)(),j=Object(d.a)(p,1)[0].data;return Object(r.useEffect)((function(){var e,t=function(){var e=Object(o.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u,e.next=3,T(t,n);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();j.connected||u(void 0),j&&h&&t(null===(e=j.connector)||void 0===e?void 0:e.getProvider(),h.address)}),[j,h]),Object(M.jsxs)("header",{className:"grid grid-cols-2 py-2 px-4 border-b-2 border-truffle-light text-md uppercase",children:[Object(M.jsx)("div",{className:"flex justify-start items-center",children:Object(M.jsxs)("span",{className:"inline-flex items-center gap-3",children:[Object(M.jsx)("img",{src:"/truffle-logomark.svg",width:"32px",alt:"Truffle Logo"}),"Truffle Dashboard"]})}),Object(M.jsxs)("div",{className:"flex justify-end items-center gap-4 text-md",children:[(null===(t=v.chain)||void 0===t?void 0:t.id)&&Object(M.jsx)(D,{chainId:v.chain.id}),(null===(n=v.chain)||void 0===n?void 0:n.id)&&Object(M.jsx)(A,{onClick:s,text:"disconnect"}),Object(M.jsx)("div",{children:i})]})]})};var I=function(e){var t=e.header,n=e.body,r=e.footer,s=t&&Object(M.jsx)("div",{className:"border-b border-grey py-3 mx-3",children:Object(M.jsx)("h2",{className:"text-center uppercase",children:t})}),c=n&&Object(M.jsx)("div",{className:"p-3 overflow-auto",children:n}),a=r&&Object(M.jsx)("div",{className:"border-t border-grey py-3 mx-3",children:r});return Object(M.jsxs)("div",{className:"border-grey border rounded bg-white w-full",children:[s,c,a]})},q=n(117),B=n.n(q);var W=function(e){var t=e.provider,n=e.connector,r=e.socket,s=e.request,c=e.setRequests,a=function(){c((function(e){return e.filter((function(e){return e.id!==s.id}))}))},i=function(){var e=Object(o.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(s,t,n,r);case 2:a();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={id:s.id,payload:{jsonrpc:s.payload.jsonrpc,id:s.payload.id,error:{code:4001,message:"User rejected @truffle/dashboard-provider request"}}},P(t,r),a();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=Object(M.jsx)("div",{className:"normal-case",children:s.payload.method}),h=Object(M.jsx)("div",{children:function(e){switch(e.payload.method){case"eth_sendTransaction":case"eth_signTransaction":var t=Object(d.a)(e.payload.params,1)[0];return Object(M.jsx)(B.a,{name:"transaction",src:t});case"eth_signTypedData_v1":case"eth_signTypedData":var n=Object(d.a)(e.payload.params,2),r=n[0],s=n[1];return Object(M.jsxs)("div",{children:[Object(M.jsxs)("div",{children:["Account: ",s]}),Object(M.jsxs)("div",{className:"flex gap-2",children:[Object(M.jsx)("div",{children:"Message:"}),Object(M.jsx)(B.a,{name:"message params",src:r})]})]});case"eth_signTypedData_v3":case"eth_signTypedData_v4":var c=Object(d.a)(e.payload.params,2),a=c[0],i=c[1],o=JSON.parse(i).message;return Object(M.jsxs)("div",{children:[Object(M.jsxs)("div",{children:["Account: ",a]}),Object(M.jsxs)("div",{className:"flex gap-2",children:[Object(M.jsx)("div",{children:"Message:"}),Object(M.jsx)(B.a,{name:"message",src:o})]})]});case"personal_sign":var u=Object(d.a)(e.payload.params,2),l=u[0],f=u[1];return Object(M.jsxs)("div",{children:[Object(M.jsxs)("div",{children:["Account: ",f]}),Object(M.jsxs)("div",{className:"flex gap-2",children:[Object(M.jsx)("div",{children:"Message:"}),Object(M.jsx)("div",{children:l})]})]});default:return Object(M.jsx)(B.a,{src:e.payload.params})}}(s)}),b=Object(M.jsxs)("div",{className:"flex justify-start items-center gap-2",children:[Object(M.jsx)(A,{onClick:i,text:"Process"}),Object(M.jsx)(A,{onClick:u,text:"Reject"})]});return Object(M.jsx)("div",{className:"flex justify-center items-center",children:Object(M.jsx)(I,{header:l,body:h,footer:b})},s.id)};var L=function(e){var t,n=e.paused,s=e.socket,c=e.requests,a=e.setRequests,i=Object(R.c)(),o=Object(d.a)(i,1)[0].data,u=null===(t=o.connector)||void 0===t?void 0:t.getProvider(),l=o.connector;Object(r.useEffect)((function(){var e=function(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))};o.connected&&u&&(n||(c.filter(w).forEach((function(t){!function(e,t){var n,r='Method "'.concat(e.payload.method,'" is unsupported by @truffle/dashboard-provider'),s=null!==(n={eth_sign:'Method "eth_sign" is unsupported by @truffle/dashboard-provider, please use "personal_sign" instead'}[e.payload.method])&&void 0!==n?n:r,c={id:e.id,payload:{jsonrpc:e.payload.jsonrpc,id:e.payload.id,error:{code:4001,message:s}}};P(c,t)}(t,s),e(t.id)})),c.filter((function(e){return!y(e)&&!w(e)})).forEach((function(t){k(t,u,l,s),e(t.id)}))))}),[n,c,a,s,o,u,l]);var f=o.connected&&u&&s?c.filter(y).map((function(e){return Object(M.jsx)(W,{request:e,setRequests:a,provider:u,connector:l,socket:s},e.id)})):[];return Object(M.jsx)("div",{className:"flex justify-center items-center py-20",children:Object(M.jsx)("div",{className:"mx-3 w-3/4 max-w-4xl h-2/3",children:Object(M.jsx)(I,{header:"Incoming Requests",body:f})})})};var F=function(e){var t,n=e.confirm,r=Object(R.c)(),s=Object(d.a)(r,2),c=s[0].data,a=s[1],i=Object(R.d)(),o=null===(t=Object(d.a)(i,1)[0].data.chain)||void 0===t?void 0:t.id,u=Object(M.jsx)("div",{children:c.connectors.map((function(e){return Object(M.jsx)(A,{onClick:function(){return a(e)},text:e.name},e.id)}))}),l=o&&Object(M.jsxs)("div",{className:"flex flex-col gap-2",children:[Object(M.jsx)("div",{children:"Please confirm you're connected to the right network (or switch to the right one) before continuing."}),Object(M.jsx)("div",{className:"flex justify-center",children:Object(M.jsx)(D,{chainId:o})})]}),f=Object(M.jsx)(A,{text:"Confirm",onClick:n});return Object(M.jsx)("div",{className:"flex justify-center items-center py-20",children:Object(M.jsx)("div",{className:"mx-3 w-3/4 max-w-4xl h-2/3 text-center",children:void 0===o?Object(M.jsx)(I,{header:"Connect Wallet",body:"Please connect your wallet to use the Truffle Dashboard Provider.",footer:u}):Object(M.jsx)(I,{header:"Connect Wallet",body:l,footer:f})})})};var J=function(e){var t=e.confirm,n=e.newChainId,r=e.previousChainId,s=Object(M.jsxs)("div",{className:"flex flex-col gap-2",children:[Object(M.jsx)("div",{children:"We detected that your connected network changed. Please confirm that this was your intention or switch back to the previous network."}),Object(M.jsx)("div",{children:"Your previous connected network was:"}),Object(M.jsx)("div",{className:"flex justify-center",children:Object(M.jsx)(D,{chainId:r})}),Object(M.jsx)("div",{children:"Your new connected network is:"}),Object(M.jsx)("div",{className:"flex justify-center",children:Object(M.jsx)(D,{chainId:n})})]}),c=Object(M.jsx)(A,{text:"Confirm",onClick:t});return Object(M.jsx)("div",{className:"flex justify-center items-center py-20",children:Object(M.jsx)("div",{className:"mx-3 w-3/4 max-w-4xl h-2/3 text-center",children:Object(M.jsx)(I,{header:"Confirm Network Changed",body:s,footer:c})})})};var U=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(),a=Object(d.a)(c,2),l=a[0],h=a[1],p=Object(r.useState)(),j=Object(d.a)(p,2),x=j[0],O=j[1],g=Object(r.useState)(),y=Object(d.a)(g,2),w=y[0],_=y[1],k=Object(r.useState)([]),P=Object(d.a)(k,2),S=P[0],T=P[1],N=Object(R.d)(),E=Object(d.a)(N,1)[0].data,D=Object(R.b)(),A=Object(d.a)(D,2);Object(u.a)(A[0]);var I=A[1],q=Object(R.c)(),B=Object(d.a)(q,1)[0].data;Object(r.useEffect)((function(){var e;O(null===(e=E.chain)||void 0===e?void 0:e.id),x&&w&&(l?(l!==x&&s(!0),l===x&&s(!1)):h(x))}),[E,B,w,x,l]);var W=function(){var e=Object(o.a)(f.a.mark((function e(){var t,n,r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w||w.readyState!==b.a.OPEN){e.next=2;break}return e.abrupt("return");case 2:return t=window.location.hostname,e.next=5,m();case 5:return n=e.sent,r=n.subscribePort,e.next=9,Object(v.connectToMessageBusWithRetries)(r,t);case 9:(s=e.sent).addEventListener("message",(function(e){"string"!==typeof e.data&&(e.data=e.data.toString());var t=Object(v.base64ToJson)(e.data);console.debug("Received message",t),Object(v.isDashboardProviderMessage)(t)?T((function(e){return[].concat(Object(i.a)(e),[t])})):Object(v.isInvalidateMessage)(t)&&T((function(e){return e.filter((function(e){return e.id!==t.payload}))}))})),s.send("ready"),_(s);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(M.jsxs)("div",{className:"h-full min-h-screen bg-gradient-to-b from-truffle-lighter to-truffle-light",children:[Object(M.jsx)(C,{disconnect:function(){console.log("Disconnecting:"),I(),h(void 0),s(!1),null===w||void 0===w||w.close(),_(void 0)}}),n&&x&&l&&Object(M.jsx)(J,{newChainId:x,previousChainId:l,confirm:function(){return h(x)}}),!n&&!w&&Object(M.jsx)(F,{confirm:W}),!n&&w&&Object(M.jsx)(L,{paused:n,socket:w,requests:S,setRequests:T})]})},H=n(22),K=n(251),V=n(260),Y=n(64),z=n(72),G=n(111),Q=H.j.mainnet,X=function(e){var t,n,r,s=null===(t=e.connector)||void 0===t?void 0:t.getProvider(!0);(console.debug("getProvider",{wProvider:s,winEth:window.ethereum,_config:e,INFURA_ID:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_INFURA_ID}),s)?(s.enable().then((function(e){return console.debug(e)})).catch((function(e){return console.error(e)})),n=new z.providers.Web3Provider(s)):n=Object(Y.getDefaultProvider)(Object(G.a)(null!==(r=e.chainId)&&void 0!==r?r:Q.id));return console.debug("getProvider.returning",{wProvider:s,winEth:window.ethereum,ret:n}),n},Z=[new K.a({chains:H.h}),new V.a({chains:H.h,options:{infuraId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_INFURA_ID,qrcode:!0}})];var $=function(){return Object(M.jsx)(R.a,{connectors:Z,provider:X,children:Object(M.jsx)(U,{})})};n(447);a.a.render(Object(M.jsx)(s.a.StrictMode,{children:Object(M.jsx)($,{})}),document.getElementById("root"))},75:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(268),t),s(n(179),t),s(n(375),t)}},[[448,1,2]]]);
//# sourceMappingURL=main.c7d442a6.chunk.js.map